default:
  callback: "on_confirm"
  uri:
    $ref: ""
  delay: 300
  payload:
    $ref: "./default/template/error.yaml"

#v2.1.0
personal-loan:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "CHILD_ITEM_ID_PERSONAL_LOAN"
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.context.version"
                  - "2.1.0"
  callbacks:
    - callback: "on_confirm"
      uri: ""
      delay: 300
      payload:
        $ref: "./loan/personal-loan/template/on_confirm.yaml"
    - callback: "on_update"
      uri: ""
      delay: 500
      payload:
        $ref: "./loan/personal-loan/template/on_update_confirm.yaml"

#v2.0.0
personal-loan_old:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "ITEM_ID_1_PERSONAL-LOAN"
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.context.version"
                  - "2.0.0"
  callbacks:
    - callback: "on_confirm"
      uri: ""
      delay: 300
      payload:
        $ref: "./loan/personal-loan_2_0_0/template/on_confirm.yaml"
    - callback: "on_update"
      uri: ""
      delay: 500
      payload:
        $ref: "./loan/personal-loan_2_0_0/template/on_confirm_update.yaml"

invoice-based-loans:
  condition:
    operation:
      type: EQUAL
      title: Check search message code
      input:
        value:
          - operation:
              type: READ
              input:
                value: "req_body.message.order.items.0.id"
          - "CHILD_ITEM_ID_INVOICE_LOAN"
  callbacks:
    - callback: "on_confirm"
      uri: ""
      delay: 300
      payload:
        $ref: "./loan/invoice-based-loans/template/on_confirm.yaml"
    - callback: "on_update"
      uri: ""
      delay: 500
      payload:
        $ref: "./loan/invoice-based-loans/template/on_update_confirm.yaml"

health-based-insurance:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "CHILD_ITEM_ID_I1_HEALTH"
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.xinput.form_response.submission_id"
                  - "F07_SUBMISSION_ID"
  callback: "on_confirm"
  uri:
    $ref: ""
  delay: 300
  payload:
    $ref: "./insurance/health-insurance/template/on_confirm.yaml"

marine-insurance:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "ITEM_ID_1_MARINE-INSURANCE"
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.context.domain"
                  - "ONDC:FIS13"

  callback: "on_confirm"
  uri:
    $ref: ""
  delay: 300
  payload:
    $ref: "./insurance/marine-insurance/template/on_confirm.yaml"

motor-based-insurance:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "CHILD_ITEM_CI1"
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.xinput.form_response.submission_id"
                  - "F07_SUBMISSION_ID"
  callback: "on_confirm"
  uri:
    $ref: ""
  delay: 300
  payload:
    $ref: "./insurance/motor-insurance/template/on_confirm.yaml"

mutual-funds-1:
  condition:
    operation:
      type: AND
      input:
        value:
          - operation:
              type: EQUAL
              title: Check search message code
              input:
                value:
                  - operation:
                      type: READ
                      input:
                        value: "req_body.message.order.items.0.id"
                  - "ITEM_ID_1_MUTUAL-FUNDS"
  callbacks:
    - callback: "on_confirm"
      uri: ""
      delay: 300
      payload:
        $ref: "./investment/mutual-funds/template/on_confirm.yaml"
    - callback: "on_update"
      uri: ""
      delay: 500
      payload:
        $ref: "./investment/mutual-funds/template/on_update.yaml"
